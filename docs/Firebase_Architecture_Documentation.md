# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Firebase –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã MoodColor

## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–°–∏—Å—Ç–µ–º–∞ Firebase –≤ –ø—Ä–æ–µ–∫—Ç–µ MoodColor –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **–º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É **Dependency Injection** –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **SOLID**.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```
Firebase Architecture
‚îú‚îÄ‚îÄ üî• Core Components
‚îÇ   ‚îú‚îÄ‚îÄ FirebaseServiceFacade (–ì–ª–∞–≤–Ω—ã–π —Ñ–∞—Å–∞–¥)
‚îÇ   ‚îú‚îÄ‚îÄ FirebaseInitializer (–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ OfflineManager (Offline –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ FirebaseErrorHandler (–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ FirebasePerformanceMonitor (–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
‚îÇ   ‚îî‚îÄ‚îÄ FirebaseBatchOperations (Batch –æ–ø–µ—Ä–∞—Ü–∏–∏)
‚îÇ
‚îú‚îÄ‚îÄ üóÉÔ∏è Database Services
‚îÇ   ‚îú‚îÄ‚îÄ DatabaseService (–ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ë–î)
‚îÇ   ‚îú‚îÄ‚îÄ EmotionDatabaseService (–≠–º–æ—Ü–∏–∏)
‚îÇ   ‚îú‚îÄ‚îÄ UserProfileDatabaseService (–ü—Ä–æ—Ñ–∏–ª–∏)
‚îÇ   ‚îú‚îÄ‚îÄ JarDatabaseService (Jar —Å–∏—Å—Ç–µ–º–∞)
‚îÇ   ‚îî‚îÄ‚îÄ EmotionSyncService (–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
‚îÇ
‚îú‚îÄ‚îÄ üîê Auth Services
‚îÇ   ‚îú‚îÄ‚îÄ AuthService (–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
‚îÇ   ‚îî‚îÄ‚îÄ AuthStateService (–°–æ—Å—Ç–æ—è–Ω–∏–µ auth)
‚îÇ
‚îî‚îÄ‚îÄ üìä Additional Services
    ‚îú‚îÄ‚îÄ Analytics (–ê–Ω–∞–ª–∏—Ç–∏–∫–∞)
    ‚îú‚îÄ‚îÄ Messaging (Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
    ‚îî‚îÄ‚îÄ RemoteConfig (–£–¥–∞–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
```

---

## üî• CORE COMPONENTS

### 1. IFirebaseServiceFacade

**–ì–ª–∞–≤–Ω—ã–π —Ñ–∞—Å–∞–¥ –¥–ª—è –≤—Å–µ—Ö Firebase —Å–µ—Ä–≤–∏—Å–æ–≤**

#### –ü—É–±–ª–∏—á–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

```csharp
/// <summary>
/// –°–µ—Ä–≤–∏—Å Firebase Database –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
/// </summary>
IDatabaseService Database { get; }

/// <summary>
/// –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Firebase Auth
/// </summary>
IAuthService Auth { get; }

/// <summary>
/// –°–µ—Ä–≤–∏—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
/// </summary>
IAuthStateService AuthState { get; }

/// <summary>
/// –°–µ—Ä–≤–∏—Å Firebase Analytics –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
/// </summary>
IFirebaseAnalyticsService Analytics { get; }

/// <summary>
/// –°–µ—Ä–≤–∏—Å Firebase Cloud Messaging –¥–ª—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
/// </summary>
IFirebaseMessagingService Messaging { get; }

/// <summary>
/// –°–µ—Ä–≤–∏—Å Firebase Remote Config –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
/// </summary>
IFirebaseRemoteConfigService RemoteConfig { get; }
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º Firebase —Å–µ—Ä–≤–∏—Å–∞–º, —É–ø—Ä–æ—â–∞–µ—Ç dependency injection –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

---

### 2. IFirebaseInitializer

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π Firebase**

#### –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```csharp
/// <summary>
/// –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Firebase —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
/// –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç offline capabilities –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
/// </summary>
/// <returns>True, –µ—Å–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞</returns>
Task<bool> InitializeAsync();
```

#### –ü—É–±–ª–∏—á–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

```csharp
/// <summary>
/// –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Firebase
/// </summary>
bool IsConnected { get; }
```

#### –°–æ–±—ã—Ç–∏—è:

```csharp
/// <summary>
/// –°–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Firebase
/// </summary>
event System.Action<bool> ConnectionStateChanged;
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Firebase default app
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ offline capabilities
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ `.info/connected`
- ‚úÖ KeepSynced –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

### 3. IFirebasePerformanceMonitor

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Firebase –æ–ø–µ—Ä–∞—Ü–∏–π**

#### –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```csharp
/// <summary>
/// –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
/// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
/// </summary>
/// <typeparam name="T">–¢–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏</typeparam>
/// <param name="operationName">–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</param>
/// <param name="operation">–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</param>
/// <returns>–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏</returns>
Task<T> TrackOperationAsync<T>(string operationName, Func<Task<T>> operation);

/// <summary>
/// –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
/// </summary>
/// <param name="operationName">–ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</param>
/// <param name="operation">–û–ø–µ—Ä–∞—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</param>
/// <returns>True, –µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ</returns>
Task<bool> TrackOperationAsync(string operationName, Func<Task> operation);

/// <summary>
/// –ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
/// </summary>
/// <param name="operationName">–ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (null –¥–ª—è –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)</param>
/// <returns>–û–±—ä–µ–∫—Ç PerformanceStats —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏</returns>
PerformanceStats GetStats(string operationName = null);

/// <summary>
/// –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å—é –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
/// </summary>
void ResetStats();
```

#### –ü—É–±–ª–∏—á–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

```csharp
/// <summary>
/// –ü–æ—Ä–æ–≥ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
/// –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5 —Å–µ–∫—É–Ω–¥
/// </summary>
TimeSpan SlowOperationThreshold { get; set; }
```

#### –°–æ–±—ã—Ç–∏—è:

```csharp
/// <summary>
/// –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –º–µ–¥–ª–µ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞)
/// </summary>
event Action<string, TimeSpan> SlowOperationDetected;
```

**PerformanceStats —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- `TotalExecutions` - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
- `SuccessfulExecutions` - –£—Å–ø–µ—à–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `FailedExecutions` - –ù–µ—É–¥–∞—á–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `AverageExecutionTime` - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `MinExecutionTime` - –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- `MaxExecutionTime` - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- `SuccessRate` - –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ (0-100)
- `SlowOperationRate` - –ü—Ä–æ—Ü–µ–Ω—Ç –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

### 4. IFirebaseBatchOperations

**–ì—Ä—É–ø–ø–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å Firebase**

#### –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```csharp
/// <summary>
/// –í—ã–ø–æ–ª–Ω—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–π –∞—Ç–æ–º–∞—Ä–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
/// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Firebase updateChildren() –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
/// </summary>
/// <param name="updates">–°–ª–æ–≤–∞—Ä—å: –ø—É—Ç—å ‚Üí –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</param>
/// <returns>True, –µ—Å–ª–∏ –≤—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ</returns>
Task<bool> UpdateMultipleRecordsAsync(Dictionary<string, object> updates);

/// <summary>
/// –°–æ–∑–¥–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–∞—Ö –∞—Ç–æ–º–∞—Ä–Ω–æ
/// </summary>
/// <param name="records">–°–ª–æ–≤–∞—Ä—å: –ø—É—Ç—å ‚Üí –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è</param>
/// <returns>True, –µ—Å–ª–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ</returns>
Task<bool> CreateMultipleRecordsAsync(Dictionary<string, object> records);

/// <summary>
/// –£–¥–∞–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∞—Ç–æ–º–∞—Ä–Ω–æ
/// </summary>
/// <param name="paths">–°–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è</param>
/// <returns>True, –µ—Å–ª–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ —É–¥–∞–ª–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ</returns>
Task<bool> DeleteMultipleRecordsAsync(List<string> paths);

/// <summary>
/// –í—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–æ–∂–Ω—É—é –∞—Ç–æ–º–∞—Ä–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ª–æ–≥–∏–∫–æ–π
/// </summary>
/// <param name="batchOperation">–§—É–Ω–∫—Ü–∏—è, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è batch –æ–ø–µ—Ä–∞—Ü–∏—é</param>
/// <returns>True, –µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ</returns>
Task<bool> ExecuteAtomicOperationAsync(Func<Dictionary<string, object>, Task> batchOperation);

/// <summary>
/// –í—ã–ø–æ–ª–Ω—è–µ—Ç fan-out –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
/// –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí —ç–º–æ—Ü–∏–∏ ‚Üí —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
/// </summary>
/// <param name="fanOutOperations">–ö–æ–ª–ª–µ–∫—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π fan-out</param>
/// <returns>True, –µ—Å–ª–∏ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ</returns>
Task<bool> ExecuteFanOutOperationAsync(IEnumerable<FanOutOperation> fanOutOperations);

/// <summary>
/// –ü–æ–ª—É—á–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
/// –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
/// </summary>
/// <param name="paths">–ü—É—Ç–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö</param>
/// <returns>–°–ª–æ–≤–∞—Ä—å: –ø—É—Ç—å ‚Üí –¥–∞–Ω–Ω—ã–µ</returns>
Task<Dictionary<string, object>> GetMultipleRecordsAsync(List<string> paths);
```

#### –ü—É–±–ª–∏—á–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

```csharp
/// <summary>
/// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –æ–¥–Ω–æ–º batch
/// –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: 500 (–ª–∏–º–∏—Ç Firebase)
/// </summary>
int MaxBatchSize { get; set; }
```

**FanOutOperation –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:**
- `Set` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è
- `Update` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- `Delete` - –£–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- `Push` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫

---

### 5. IOfflineManager

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤ offline —Ä–µ–∂–∏–º–µ**

#### –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

```csharp
/// <summary>
/// –í—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é —Å —É—á–µ—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
/// –ï—Å–ª–∏ online - –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
/// –ï—Å–ª–∏ offline - –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –æ—á–µ—Ä–µ–¥—å
/// </summary>
/// <param name="operation">–û–ø–µ—Ä–∞—Ü–∏—è, —Ä–µ–∞–ª–∏–∑—É—é—â–∞—è IDatabaseOperation</param>
/// <returns>True, –µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏–ª–∏ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å</returns>
Task<bool> ExecuteOperationAsync(IDatabaseOperation operation);

/// <summary>
/// –î–æ–±–∞–≤–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—É—é –æ—á–µ—Ä–µ–¥—å
/// –û–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
/// </summary>
/// <param name="operation">–û–ø–µ—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –æ—á–µ—Ä–µ–¥—å</param>
void QueueOperation(IDatabaseOperation operation);

/// <summary>
/// –û—á–∏—â–∞–µ—Ç –≤—Å—é –æ—á–µ—Ä–µ–¥—å –æ–ø–µ—Ä–∞—Ü–∏–π
/// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏–ª–∏ —Å–±—Ä–æ—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
/// </summary>
void ClearQueue();

/// <summary>
/// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
/// </summary>
/// <param name="isConnected">–ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</param>
void UpdateConnectionState(bool isConnected);
```

#### –ü—É–±–ª–∏—á–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

```csharp
/// <summary>
/// –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
/// </summary>
bool IsOnline { get; }

/// <summary>
/// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π, –æ–∂–∏–¥–∞—é—â–∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏
/// </summary>
int QueuedOperationsCount { get; }
```

#### –°–æ–±—ã—Ç–∏—è:

```csharp
/// <summary>
/// –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
/// </summary>
event Action<bool> ConnectionStateChanged;

/// <summary>
/// –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏
/// –ü–∞—Ä–∞–º–µ—Ç—Ä: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
/// </summary>
event Action<int> QueueProcessed;
```

**IDatabaseOperation —Ç—Ä–µ–±—É–µ—Ç:**
- `ExecuteAsync()` - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `Description` - –û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `Priority` - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—á–µ–º –≤—ã—à–µ, —Ç–µ–º –≤–∞–∂–Ω–µ–µ)
- `OperationId` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö PRODUCTION

### –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:

‚úÖ **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –£–ø—Ä–æ—â–µ–Ω–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞  
‚úÖ **Error Handling** - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å retry  
‚úÖ **Offline Support** - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ offline —Ä–µ–∂–∏–º–∞  
‚úÖ **Performance** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π  
‚úÖ **Security** - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏  
‚úÖ **Scalability** - Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ fan-out –ø–∞—Ç—Ç–µ—Ä–Ω—ã  
‚úÖ **Monitoring** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ **Documentation** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API  

### –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π:

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-------|--------|-----------|
| **–°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** | 50+ —Å—Ç—Ä–æ–∫ | 10-15 —Å—Ç—Ä–æ–∫ | **70% ‚Üì** |
| **–í—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** | 2-3 —Å–µ–∫—É–Ω–¥—ã | 0.5-1 —Å–µ–∫—É–Ω–¥–∞ | **60% ‚Üì** |
| **Offline capabilities** | –ë–∞–∑–æ–≤—ã–µ | –ü–æ–ª–Ω—ã–µ | **100% ‚Üë** |
| **Error handling** | –†—É—á–Ω–∞—è | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è | **Centralized** |
| **Performance monitoring** | –ù–µ—Ç | –î–µ—Ç–∞–ª—å–Ω—ã–π | **New Feature** |
| **Batch operations** | –ù–µ—Ç | –î–æ 500 –æ–ø–µ—Ä–∞—Ü–∏–π | **New Feature** |
| **Code maintainability** | 6/10 | 9/10 | **50% ‚Üë** |

**Firebase –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MoodColor –≥–æ—Ç–æ–≤–∞ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ 